# OSlab4
### 真实操作系统中提供的并发进程同步机制是怎样实现和解决同步问题的？
真实操作系统中提供的并发进程同步机制包括互斥锁、信号量等，用于解决多进程或多线程之间的同步和互斥问题。互斥锁是一种常用的同步机制，用于实现对共享资源的互斥访问，防止多个进程或线程同时访问和修改共享资源而引发竞态条件问题。在访问共享资源之前，进程或线程尝试获取互斥锁。如果锁已被其他进程或线程占用，则当前进程或线程会被阻塞，直到锁被释放。一旦获得锁，进程或线程可以安全地访问共享资源，并在使用完毕后释放锁。信号量是一种带有计数器的变量，用于实现对共享资源的访问控制和同步操作。信号量有两种基本操作， 一是 P 操作：如果信号量的值大于 0，则将其减 1；如果值为 0，则进程或线程会被阻塞等待。二是 V 操作：将信号量的值加 1，唤醒一个或多个等待的进程或线程。共享内存是进程间通信的一种高效方式，允许多个进程直接访问同一块内存区域。通过信号量保护共享内存的访问，避免数据竞争。
生产者-消费者使用信号量 empty 表示缓冲区中的空闲位置数，初值为缓冲区大小。使用信号量 full 表示缓冲区中的已占用位置数，初值为0。使用信号量 mutex 实现对缓冲区的互斥访问。
抽烟者问题两个供应者轮流提供三种材料中的两种，三个抽烟者分别拥有一种材料，等待另外两种材料才能抽烟。使用信号量 sem_tobacco、sem_paper、sem_glue 分别表示三种材料的资源信号量，初值为0。使用信号量 mutex 确保对共享内存的互斥访问。供应者提供材料后，通过 V操作 唤醒对应的抽烟者。抽烟者完成抽烟后，通过 V操作 通知供应者可以继续提供材料。

### 信号灯机制是怎样完成进程的互斥和同步的？

通过信号量值为1的互斥锁，确保共享资源的互斥访问。通过信号量值为0的资源信号量，协调进程间的执行顺序。通过互斥信号灯，可以保证在任何时刻只有一个进程可以访问特定的资源。这是通过P操作来实现的，如果信号灯的值大于0，进程可以进入临界区；如果为0，则进程将被阻塞，直到信号灯的值变为正数。计数信号灯可以用于同步多个进程的执行。例如，一个进程可以等待其他进程完成初始化工作后再开始执行。这可以通过设置信号灯的初始值为0，然后让其他进程在完成初始化后执行V操作来实现。
### 信号量的初值和其值的变化的物理意义是什么？
初值为1：表示资源可用，用于互斥锁。初值为0：表示资源不可用，用于同步信号量。P操作：信号量值减1，表示资源被占用或进程进入等待。V操作：信号量值加1，表示资源被释放或进程被唤醒。

### 使用多于 4 个的生产者和消费者

![!\[alt text\](<pictures/截图 2025-05-27 21-51-20.png>)](<pictures/截图 2025-05-27 21-51-20.png>)

抽烟者问题
![alt text](<pictures/截图 2025-05-27 21-53-44.png>)